<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro</title>

  <link rel="stylesheet" href="create.css">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&display=swap"
    rel="stylesheet">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">



</head>

<body>

  <img class="imageBackground" src="../../img/Background Login (2).png" alt="">


  <section class="register">

    <div class="logo1">
      <img src="../../img/Logo 1.svg" alt="">
    </div>

    <div id="returnPage">
      <a href="../../index.html"><i class="fa-solid fa-left-long fa-2x"></i></a>
    </div>

    <div class="text1">
      <h2>Criar Conta</h2>
    </div>


    <div class="forms">
      <form action="">
        <label for="name"></label>
        <input class="inputName" type="text" id="nome" name="nome" placeholder="Nome Completo" required>

        <br>

        <label for="email"></label>
        <input class="inputEmail" type="email" id="email" name="email" placeholder="exemplo@email.com" required>

        <br>

        <label for="senha"></label>
        <input class="inputPassword" type="password" id="senha" name="senha" placeholder=" Senha" required>

        <br>

        <label for="dataNascimento"></label>
        <input class="inputDate" type="date" id="dataNascimento" name="dataNascimento">

        <br>

        <div class="gen">
          <label>Genero:</label>
          <input type="radio" id="masculino" name="genero" value="masculino">
          <label for="masculino">Masculino</label>
          <input type="radio" id="feminino" name="genero" value="feminino">
          <label for="feminino">Feminino</label>
        </div>


        <div class="buttonForm">
          <button class="buttonStyle" type="submit">Enviar</button>
        </div>


      </form>


    </div>

  </section>
  <script>
    document.querySelector('form').addEventListener('submit', async function (e) {
      e.preventDefault();

      // Pegando os dados do formulário
      const nome = document.getElementById('nome').value;
      const email = document.getElementById('email').value;
      const senha = document.getElementById('senha').value;
      // const dataNascimento = document.getElementById('dataNascimento').value;
      const genero = document.querySelector('input[name="genero"]:checked')?.value;

      // Montando o objeto para enviar
      const userData = {
        name: nome,
        email: email,
        password: senha,
        // birthDate: dataNascimento,
        gender: genero
      };

      try {
        const response = await fetch('http://localhost:4000/v1/cadastro', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(userData)
        });

        const result = await response.json();
        if (response.ok) {
          alert('Cadastro realizado com sucesso!');
          window.location.href = '../../index.html';
          // Redirecionar ou limpar formulário
        } else {
          alert('Erro ao cadastrar: ' + result.message);
        }
      } catch (err) {
        alert('Erro de conexão com o servidor.');
      }
    });


  </script>
  <script src="https://kit.fontawesome.com/bd47bbad40.js" crossorigin="anonymous"></script>
</body>

</html>